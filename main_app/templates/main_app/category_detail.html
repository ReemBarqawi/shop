{% extends "base.html" %}

{% block content %}
<h1>{{ object.name }}</h1>


{% if user.is_authenticated and user.is_staff %}
  <p>
    <a href="{% url 'category_edit' object.pk %}">Edit Category</a> |
    <a href="{% url 'category_delete' object.pk %}">Delete Category</a>
  </p>
{% endif %}

<hr>

<h2>Products in "{{ object.name }}"</h2>
<div class="product-grid">
  {% for p in object.product_set.all %}
    <div class="product-card">
      <a href="{% url 'product_detail' p.pk %}">
        {% if p.image %}
          <img src="{{ p.image.url }}" alt="{{ p.name }}" style="max-width:150px;">
        {% endif %}
        <h3>{{ p.name }}</h3>
      </a>
      <p>${{ p.price }}</p>
    </div>
  {% empty %}
    <p>No products in this category yet.</p>
  {% endfor %}
</div>

<p><a href="{% url 'category_list' %}">Back to categories</a></p>
{% endblock %}
